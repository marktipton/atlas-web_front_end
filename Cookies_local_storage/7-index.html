<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>

        <meta charset="utf-8" />
        <title>Task 6</title>
        <!-- <script src="src/index.js" defer></script> -->
    </head>

    <body>

      <script>

        function isSessionStorageSupported() {
          try {
            sessionStorage.setItem('test', 'test');
            sessionStorage.removeItem('test');
            return true;
          } catch (e) {
            return false;
          }
        }

        var items = ['Shampoo', 'Soap', 'Sponge', 'Water'];

        function getCartFromStorage() {
          var cart = sessionStorage.getItem('cart');
          if (cart) {
            return JSON.parse(cart);
          } else {
            return {};
          }
        }

        function addItemToCart(item) {
          var cart = getCartFromStorage();
          if (cart[item]) {
            cart[item] += 1;
          } else {
            cart[item] = 1
          }
          sessionStorage.setItem('cart', JSON.stringify(cart));
          displayCart();
        }

        function createStore() {
          var ul = document.createElement('ul');

          items.forEach(function(item) {
            var li = document.createElement('li');
            li.textContent = item;
            li.addEventListener('click', function() {
              addItemToCart(item);
            });
            ul.appendChild(li);
          });

          document.body.appendChild(ul);
        }

        function displayCart() {
          var cart = Object.keys(sessionStorage);
          var cartCount = cart.length;

          if (cartCount > 0) {
            var p = document.createElement('p');
            p.textContent = 'You previously had ' + cartCount + ' items in your cart';
            document.body.appendChild(p);
          }
        }

        createStore();
        displayCart();
      </script>
    </body>

</html>